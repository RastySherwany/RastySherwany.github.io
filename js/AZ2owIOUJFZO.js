!function(t,e,i){"use strict";"undefined"!=typeof module&&module.exports?module.exports=i():"function"==typeof define&&define.amd?define("factory",(function(){return i()})):t[e]=i()}(window,"detectZoom",(function(){var t=function(){return window.devicePixelRatio||1},e=function(){return{zoom:1,devicePxPerCssPx:1}},i=function(){var e=Math.round(screen.deviceXDPI/screen.logicalXDPI*100)/100;return{zoom:e,devicePxPerCssPx:e*t()}},r=function(){var e=Math.round(document.documentElement.offsetHeight/window.innerHeight*100)/100;return{zoom:e,devicePxPerCssPx:e*t()}},n=function(){var e=(90==Math.abs(window.orientation)?screen.height:screen.width)/window.innerWidth;return{zoom:e,devicePxPerCssPx:e*t()}},o=function(){var e=function(t){return t.replace(/;/g," !important;")},i=document.createElement("div");i.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0",i.setAttribute("style",e("font: 100px/1em sans-serif; -webkit-text-size-adjust: none; text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;"));var r=document.createElement("div");r.setAttribute("style",e("width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;")),r.appendChild(i),document.body.appendChild(r);var n=1e3/i.clientHeight;return n=Math.round(100*n)/100,document.body.removeChild(r),{zoom:n,devicePxPerCssPx:n*t()}},s=function(){var t=h("min--moz-device-pixel-ratio","",0,10,20,1e-4);return{zoom:t=Math.round(100*t)/100,devicePxPerCssPx:t}},a=function(){return{zoom:s().zoom,devicePxPerCssPx:t()}},c=function(){var e=window.top.outerWidth/window.top.innerWidth;return{zoom:e=Math.round(100*e)/100,devicePxPerCssPx:e*t()}},h=function(t,e,i,r,n,o){var s,a,c,h;window.matchMedia?s=window.matchMedia:(a=document.getElementsByTagName("head")[0],c=document.createElement("style"),a.appendChild(c),(h=document.createElement("div")).className="mediaQueryBinarySearch",h.style.display="none",document.body.appendChild(h),s=function(t){c.sheet.insertRule("@media "+t+"{.mediaQueryBinarySearch {text-decoration: underline} }",0);var e="underline"==getComputedStyle(h,null).textDecoration;return c.sheet.deleteRule(0),{matches:e}});var u=function i(r,n,a){var c=(r+n)/2;if(a<=0||n-r<o)return c;return s("("+t+":"+c+e+")").matches?i(c,n,a-1):i(r,c,a-1)}(i,r,n);return h&&(a.removeChild(c),document.body.removeChild(h)),u},u=function(){var t=e;return isNaN(screen.logicalXDPI)||isNaN(screen.systemXDPI)?window.navigator.msMaxTouchPoints?t=r:"orientation"in window&&"string"==typeof document.body.style.webkitMarquee?t=n:"string"==typeof document.body.style.webkitMarquee?t=o:navigator.userAgent.indexOf("Opera")>=0?t=c:window.devicePixelRatio?t=a:s().zoom>.001&&(t=s):t=i,t}();return{zoom:function(){return u().zoom},device:function(){return u().devicePxPerCssPx}}}));var wpcom_img_zoomer={clientHintSupport:{gravatar:!1,files:!1,photon:!1,mshots:!1,staticAssets:!1,latex:!1,imgpress:!1},useHints:!1,zoomed:!1,timer:null,interval:1e3,imgNeedsSizeAtts:function(t){return null===t.getAttribute("width")&&null===t.getAttribute("height")&&!(t.width<t.naturalWidth||t.height<t.naturalHeight)},hintsFor:function(t){return!1!==this.useHints&&(!1!==this.hints()&&(void 0!==this.clientHintSupport[t]&&!0===this.clientHintSupport[t]))},hints:function(){try{var t=window.navigator.userAgent.match(/\sChrome\/([0-9]+)\.[.0-9]+\s/);if(null!==t){var e=parseInt(t[1],10);if(!1===isNaN(e)&&e>=46)return!0}}catch(t){return!1}return!1},init:function(){var t=this;try{t.zoomImages(),t.timer=setInterval((function(){t.zoomImages()}),t.interval)}catch(t){}},stop:function(){this.timer&&clearInterval(this.timer)},getScale:function(){var t=detectZoom.device();return t=t<=1?1:t<=1.5?1.5:t<=2?2:t<=3?3:t<=4?4:5},shouldZoom:function(t){return!("innerWidth"in window&&!window.innerWidth)&&(1!=t||0!=this.zoomed)},zoomImages:function(){var t=this,e=t.getScale();if(t.shouldZoom(e)){t.zoomed=!0;for(var i=document.getElementsByTagName("img"),r=0;r<i.length;r++)if((!("complete"in i[r])||i[r].complete)&&!i[r].hasAttribute("srcset")){var n=i[r].getAttribute("scale");if(n!=e&&"0"!=n){var o=i[r].getAttribute("scale-fail");o&&o<=e||i[r].width&&i[r].height&&(!n&&i[r].getAttribute("data-lazy-src")&&i[r].getAttribute("data-lazy-src")!==i[r].getAttribute("src")||(t.scaleImage(i[r],e)?i[r].setAttribute("scale",e):i[r].setAttribute("scale","0")))}}}},scaleImage:function(t,e){var i=this,r=t.src,n=!1,o=!1,s=!1;if(t.parentNode.className.match(/slideshow-slide/))return!1;if(t.parentNode.className.match(/coblocks-lightbox__image/))return!1;if(t.src.match(/^https?:\/\/([^\/]*\.)?gravatar\.com\/.+[?&](s|size)=/)){if(!0===this.hintsFor("gravatar"))return!1;r=t.src.replace(/([?&](s|size)=)(\d+)/,(function(r,n,o,s){var a="originals",c=t.getAttribute(a);null===c&&(c=s,t.setAttribute(a,c),i.imgNeedsSizeAtts(t)&&(t.width=t.width,t.height=t.height));t.clientWidth;var h=Math.ceil(t.clientWidth*e);return h=Math.max(h,c),n+(h=Math.min(h,512))}))}else if(t.src.match(/^https?:\/\/([^\/]+\.)*(wordpress|wp)\.com\/mshots\/.+[?&]w=\d+/)){if(!0===this.hintsFor("mshots"))return!1;r=(r=t.src.replace(/([?&]w=)(\d+)/,(function(r,n,o){var s="originalw",a=t.getAttribute(s);null===a&&(a=o,t.setAttribute(s,a),i.imgNeedsSizeAtts(t)&&(t.width=t.width,t.height=t.height));var c=t.clientWidth,h=Math.ceil(c*e);return h=Math.max(h,a),e>t.getAttribute("scale")&&h<=t.naturalWidth&&(h=o),o!=h?n+h:r}))).replace(/([?&]h=)(\d+)/,(function(i,n,o){if(r==t.src)return i;var s="originalh",a=t.getAttribute(s);null===a&&(a=o,t.setAttribute(s,a));var c=t.clientHeight,h=Math.ceil(c*e);return h=Math.max(h,a),e>t.getAttribute("scale")&&h<=t.naturalHeight&&(h=o),o!=h?n+h:i}))}else if(t.src.match(/^https?:\/\/([^\/.]+\.)*(wp|wordpress)\.com\/imgpress\?(.+)/)){if(!0===this.hintsFor("imgpress"))return!1;var a=["zoom","url","h","w","fit","filter","brightness","contrast","colorize","smooth","unsharpmask"],c=RegExp.$3.split("&");for(var h in c)if(h=c[h].split("=")[0],-1==a.indexOf(h))return!1;t.width=t.width,t.height=t.height,r=1==e?t.src.replace(/\?(zoom=[^&]+&)?/,"?"):t.src.replace(/\?(zoom=[^&]+&)?/,"?zoom="+e+"&")}else if((n=t.src.match(/^https?:\/\/([^\/]+)\.files\.wordpress\.com\/.+[?&][wh]=/))||(o=t.src.match(/^https?:\/\/([^\/.]+\.)*(wp|wordpress)\.com\/latex\.php\?(latex|zoom)=(.+)/))||(s=t.src.match(/^https?:\/\/i[\d]{1}\.wp\.com\/(.+)/))){if(!1!==n&&!0===this.hintsFor("files"))return!1;if(!1!==o&&!0===this.hintsFor("latex"))return!1;if(!1!==s&&!0===this.hintsFor("photon"))return!1;if(t.width=t.width,t.height=t.height,1==e)r=t.src.replace(/\?(zoom=[^&]+&)?/,"?");else{var u=(r=t.src).match(/([?&]w=)(\d+)/);null!==u&&u[2]&&(r=r.replace(u[0],u[1]+t.width)),null!==(u=r.match(/([?&]h=)(\d+)/))&&u[2]&&(r=r.replace(u[0],u[1]+t.height));var d="&zoom=2";r.match(/\?/)||(d="?zoom=2"),t.setAttribute("srcset",r+d+" "+e+"x")}}else{if(!t.src.match(/^https?:\/\/[^\/]+\/.*[-@]([12])x\.(gif|jpeg|jpg|png)(\?|$)/))return!1;if(!0===this.hintsFor("staticAssets"))return!1;t.width=t.width,t.height=t.height;var l=RegExp.$1,m=l;l!=(m=e<=1?1:2)&&(r=t.src.replace(/([-@])[12]x\.(gif|jpeg|jpg|png)(\?|$)/,"$1"+m+"x.$2$3"))}if(r!=t.src){var g,f=t.getAttribute("src-orig");f||(f=t.src,t.setAttribute("src-orig",f)),g=t.src,t.onerror=function(){t.src=g,t.getAttribute("scale-fail")<e&&t.setAttribute("scale-fail",e),t.onerror=null},t.src=r}return!0}};wpcom_img_zoomer.init();